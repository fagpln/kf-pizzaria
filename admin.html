<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel Admin - KF Pizzaria</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h2>ğŸ“‹ Painel Admin - KF Pizzaria</h2>

  <div id="listaPedidos">
    <p>Carregando pedidos...</p>
  </div>

  <!-- Firebase -->
  <script src="firebase.js"></script>

  <script>
    // Escuta pedidos em tempo real
    db.collection("pedidos").onSnapshot(snapshot => {
      const lista = document.getElementById("listaPedidos");
      lista.innerHTML = "";

      if (snapshot.empty) {
        lista.innerHTML = "<p>Nenhum pedido ainda.</p>";
        return;
      }

      snapshot.forEach(doc => {
        const pedido = doc.data();
        const id = doc.id;

        const itens = pedido.itens
          .map(i => `${i.nome} x${i.quantidade}`)
          .join("<br>");

        lista.innerHTML += `
          <div class="pedido">
            <p><strong>ğŸ‘¤ Nome:</strong> ${pedido.nome}</p>

            <p><strong>ğŸ§¾ Itens:</strong><br>${itens}</p>

            <p><strong>ğŸ’° Total:</strong> R$ ${pedido.total.toFixed(2)}</p>

            <p><strong>ğŸ’³ Pagamento:</strong> ${pedido.pagamento}</p>

            <p><strong>ğŸ“ EndereÃ§o:</strong> ${pedido.endereco}</p>

            <p><strong>ğŸ“Œ Status:</strong> ${pedido.status}</p>

            <button onclick="atualizarStatus('${id}', 'Em preparo')">
              ğŸ³ Em preparo
            </button>

            <button onclick="atualizarStatus('${id}', 'Saiu para entrega')">
              ğŸ›µ Saiu para entrega
            </button>

            <button onclick="atualizarStatus('${id}', 'Entregue')">
              âœ… Entregue
            </button>
          </div>
          <hr>
        `;
      });
    });

    // Atualiza status do pedido
    function atualizarStatus(id, status) {
      db.collection("pedidos").doc(id).update({
        status: status
      });
    }
  </script>

</body>
</html>
