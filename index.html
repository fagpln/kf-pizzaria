<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KF Pizzaria & Tapiocaria</title>

<style>
/* ================= RESET E BODY ================= */
body {
  font-family: Arial, sans-serif;
  background:#0e0e0e;
  color:#fff;
  margin:0;
  padding-bottom:250px;
}

/* ================= HEADER ================= */
header {
  background:#000;
  color:#fff;
  text-align:center;
  padding:20px;
}
header img {
  max-width:360px;
  width:100%;
  height:auto;
  display:block;
  margin:0 auto;
}
header span {
  font-size:22px;
  font-weight:bold;
  color:#00ff66;
}
@media (max-width:600px){
  header img { max-width:300px; }
}

/* ================= NAV ================= */
nav {
  display:flex;
  justify-content:space-around;
  background:#111;
  padding:10px;
}
nav button {
  flex:1;
  margin:5px;
  padding:10px;
  font-size:16px;
  background:#111;
  color:#00ff66;
  border:2px solid #00ff66;
  border-radius:8px;
}

/* ================= SEÃ‡Ã•ES ================= */
section {
  padding:15px;
}
.produto {
  border-bottom:1px solid #333;
  padding:10px 0;
}
.produto button {
  background:#00ff66;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  font-weight:bold;
}

/* ================= CARRINHO ================= */
#carrinho {
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#000;
  border-top:2px solid #00ff66;
  padding:10px;
}
</style>
</head>

<body>

<header>
  <img src="logo.png" alt="KF Pizzaria">
  <span>Pedidos Online</span>
</header>

<nav>
  <button onclick="mostrar('pizzas')">ğŸ• Pizzas</button>
  <button onclick="mostrar('doces')">ğŸ« Doces</button>
  <button onclick="mostrar('tapiocas')">ğŸŒ¯ Tapiocas</button>
</nav>

<!-- ================= CARDÃPIO ================= -->

<section id="pizzas">
  <h2>ğŸ• Pizzas Salgadas</h2>

  <div class="produto">
    <strong>Mussarela</strong><br>
    25cm R$30 | 35cm R$45
    <br>
    <button onclick="adicionar('Pizza Mussarela 25cm',30)">25cm</button>
    <button onclick="adicionar('Pizza Mussarela 35cm',45)">35cm</button>
  </div>

  <div class="produto">
    <strong>Calabresa</strong><br>
    25cm R$32 | 35cm R$48
    <br>
    <button onclick="adicionar('Pizza Calabresa 25cm',32)">25cm</button>
    <button onclick="adicionar('Pizza Calabresa 35cm',48)">35cm</button>
  </div>
</section>

<section id="doces" style="display:none">
  <h2>ğŸ« Pizzas Doces</h2>

  <div class="produto">
    <strong>Banana com Canela</strong><br>
    25cm R$30 | 35cm R$45
    <br>
    <button onclick="adicionar('Pizza Banana 25cm',30)">25cm</button>
    <button onclick="adicionar('Pizza Banana 35cm',45)">35cm</button>
  </div>

  <div class="produto">
    <strong>PrestÃ­gio</strong><br>
    <button onclick="adicionar('Pizza PrestÃ­gio 25cm',30)">25cm</button>
    <button onclick="adicionar('Pizza PrestÃ­gio 35cm',45)">35cm</button>
  </div>
</section>

<section id="tapiocas" style="display:none">
  <h2>ğŸŒ¯ Tapiocas</h2>

  <div class="produto">
    <strong>Frango com Catupiry</strong> R$12
    <br>
    <button onclick="adicionar('Tapioca Frango',12)">Adicionar</button>
  </div>
</section>

<!-- ================= CARRINHO ================= -->

<div id="carrinho">
  <h3>ğŸ›’ Seu Pedido</h3>
  <div id="lista"></div>
  <p><strong>Total:</strong> R$ <span id="total">0.00</span></p>

  <input id="nome" placeholder="Seu nome">
  <input id="endereco" placeholder="EndereÃ§o completo">

  <select id="pagamento">
    <option value="">Forma de pagamento</option>
    <option>Dinheiro</option>
    <option>CartÃ£o</option>
    <option>Pix</option>
  </select>

  <input id="troco" placeholder="Troco para quanto?">
  <textarea id="observacao" placeholder="ObservaÃ§Ãµes"></textarea>

  <button onclick="finalizarPedido()">ğŸ“² Finalizar Pedido</button>
</div>

<!-- ================= FIREBASE ================= -->
<script src="firebase.js"></script>

<script>
let carrinho = [];
let total = 0;

function mostrar(id){
  document.querySelectorAll("section").forEach(s => s.style.display="none");
  document.getElementById(id).style.display="block";
}

function adicionar(nome, preco){
  const item = carrinho.find(i => i.nome === nome);
  if(item){
    item.qtd++;
  } else {
    carrinho.push({ nome, preco, qtd:1 });
  }
  atualizarCarrinho();
}

function atualizarCarrinho(){
  const lista = document.getElementById("lista");
  total = 0;
  lista.innerHTML = "";

  carrinho.forEach(i => {
    total += i.preco * i.qtd;
    lista.innerHTML += `<div>${i.nome} x${i.qtd}</div>`;
  });

  document.getElementById("total").innerText = total.toFixed(2);
}

/* ================= FINALIZAR PEDIDO (FIREBASE) ================= */

function finalizarPedido(){
  if(carrinho.length === 0){
    alert("Carrinho vazio");
    return;
  }

  const nome = document.getElementById("nome").value.trim();
  const endereco = document.getElementById("endereco").value.trim();
  const pagamento = document.getElementById("pagamento").value;
  const troco = document.getElementById("troco").value;
  const observacao = document.getElementById("observacao").value;

  if(!nome || !endereco || !pagamento){
    alert("Preencha todos os dados");
    return;
  }

  // ğŸ”¥ SALVA NO FIREBASE
  db.collection("pedidos").add({
    nome,
    endereco,
    pagamento,
    troco,
    observacao,
    itens: carrinho,
    total,
    status: "Pendente",
    criadoEm: new Date()
  });

  // ğŸ“² WHATSAPP
  const mapa = "https://www.google.com/maps/search/?api=1&query=" + encodeURIComponent(endereco);
  const itensTxt = carrinho.map(i => `- ${i.nome} x${i.qtd}`).join("\n");

  const msg =
`ğŸ• *NOVO PEDIDO*
ğŸ‘¤ ${nome}

ğŸ§¾ Pedido:
${itensTxt}

ğŸ’° Total: R$ ${total.toFixed(2)}
ğŸ’³ ${pagamento}

ğŸ“ EndereÃ§o:
${endereco}

ğŸ—ºï¸ ${mapa}`;

  window.open("https://wa.me/5521997437285?text=" + encodeURIComponent(msg), "_blank");

  carrinho = [];
  atualizarCarrinho();
  alert("Pedido enviado!");
}
</script>

</body>
</html>
