<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KF Pizzaria & Tapiocaria</title>
<style>
/* ================= RESET E BODY ================= */
body {
  font-family: Arial,sans-serif;
  background:#0e0e0e;
  color:#fff;
  margin:0;
  padding-bottom:250px;
}

/* ================= HEADER ================= */
header {
  background:#000;
  color:#fff;
  text-align:center;
  padding:20px;
}
header img {
  max-width:360px;
  width:100%;
  height:auto;
  display:block;
  margin:0 auto;
}
header span {
  font-size:22px;
  font-weight:bold;
  color:#00ff66;
}
@media (max-width:600px){
  header img { max-width:300px; }
}

/* ================= NAVEGA√á√ÉO ================= */
nav {
  display:flex;
  justify-content:space-around;
  background:#111;
  padding:10px;
}
nav button {
  flex:1;
  margin:5px;
  padding:10px;
  font-size:16px;
  background:#111;
  color:#00ff66;
  border:2px solid #00ff66;
  border-radius:8px;
  cursor:pointer;
  transition:all 0.2s ease;
}
nav button:hover { transform:scale(1.05); background:#00ff66; color:#000; }
nav button:active { transform:scale(0.95); }

/* ================= SECTIONS ================= */
section { display:none; padding:15px; }
section.ativo { display:block; }

/* ================= PRODUTOS ================= */
.produto, .produto-bebida {
  background:#1c1c1c;
  padding:12px;
  border-radius:10px;
  margin-bottom:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.produto button, .produto-bebida button {
  background:#111;
  border:2px solid #00ff66;
  border-radius:50px;
  padding:8px 15px;
  cursor:pointer;
  font-weight:bold;
  color:#00ff66;
  transition:all 0.3s ease;
}
.produto button:hover, .produto-bebida button:hover { transform:scale(1.05); background:#00ff66; color:#000; }
.produto button.selected, .produto-bebida button.selected {
  background:#007bff;
  color:#fff;
  box-shadow:0 0 10px #00ff66;
  animation:pulse 0.5s ease;
}
@keyframes pulse { 0%{transform:scale(1);}50%{transform:scale(1.1);}100%{transform:scale(1);} }

/* ================= BOT√ÉO CARRINHO ================= */
#botaoAdicionarCarrinho { 
  position: fixed; 
  bottom: 20px;
  right: 20px;
  background: #ff6600; 
  color: #fff; 
  font-weight: bold; 
  padding: 10px 18px;
  border-radius: 8px; 
  font-size: 16px;
  cursor: pointer; 
  z-index: 9999; 
  box-shadow: 0 0 12px #ff6600; 
  transition: all 0.3s ease; 
}
#botaoAdicionarCarrinho:hover { transform: scale(1.05); }

/* ================= CARRINHO ================= */
#carrinho {
  background:#111;
  padding:15px;
  position:fixed;
  bottom:0;
  width:100%;
  max-height:300px;
  overflow-y:auto;
  border-top:2px solid #00ff66;
}
#carrinho h3 { margin-top:0; }
#carrinho button {
  background:red;
  color:#fff;
  border:none;
  padding:4px 6px;
  margin-left:5px;
  border-radius:4px;
  cursor:pointer;
}

/* ================= INPUTS ================= */
input, select, textarea { width:100%; padding:8px; margin:6px 0; border-radius:6px; border:none; }
textarea { resize:none; }
.finalizar {
  background:#00ff66;
  padding:10px;
  width:100%;
  font-size:18px;
  border-radius:8px;
  margin-top:10px;
  border:none;
  cursor:pointer;
  font-weight:bold;
}

/* ================= PIZZA ================= */
.tamanho-pizza { margin:5px 0 10px 0; display:flex; gap:8px; }
.tamanho-pizza button {
  flex:1;
  padding:10px 0;
  font-size:16px;
  font-weight:bold;
  border-radius:8px;
  border:2px solid #00ff66;
  background:#111;
  color:#00ff66;
  cursor:pointer;
  transition:all 0.2s ease;
}
.tamanho-pizza button.selected {
  background:#00ff66;
  color:#000;
  box-shadow:0 0 10px #00ff66;
  transform:scale(1.05);
}
</style>
</head>
<body>

<header>
  <img src="logo-kf.png" alt="KF Pizzaria & Tapiocaria"
       onerror="this.style.display='none';document.getElementById('fallback-text').style.display='block'">
  <span id="fallback-text" style="display:none;">KF Pizzaria & Tapiocaria üçïüåÆ</span>
</header>

<nav>
  <button onclick="mostrarMenu('pizzas')">üçï Pizzas</button>
  <button onclick="mostrarMenu('tapiocas')">üåÆ Tapiocas</button>
  <button onclick="mostrarMenu('bebidas')">ü•§ Bebidas</button>
</nav>

<section id="pizzas" class="ativo">
  <div class="tamanho-pizza">
    <button id="t25" onclick="selecionarTamanho('25cm')">25cm</button>
    <button id="t35" onclick="selecionarTamanho('35cm')">35cm</button>
  </div>
  <div id="listaPizzas"></div>
</section>

<section id="tapiocas">
  <h3>Tapiocas (Escolha at√© 2 recheios pagos + 1 Acompanhamento)</h3>
  <div id="listaTapiocas"></div>
</section>

<section id="bebidas">
  <h3>Bebidas</h3>
  <div id="listaBebidas"></div>
</section>

<button id="botaoAdicionarCarrinho" onclick="adicionarPizzaAoCarrinho(); adicionarTapiocaAoCarrinho();">
  üõí Adicionar ao Carrinho
</button>

<div id="carrinho">
  <h3>üõí Carrinho</h3>
  <div id="itensCarrinho"></div>
  <p><strong>Total: R$ <span id="totalCarrinho">0.00</span></strong></p>

  <h4>Finalizar Pedido</h4>
  <input id="nome" placeholder="Nome do cliente">
  <input id="endereco" placeholder="Endere√ßo completo">
  <select id="pagamento" onchange="atualizarTrocoPix()">
    <option value="">Forma de pagamento</option>
    <option value="dinheiro">Dinheiro</option>
    <option value="cartao">Cart√£o</option>
    <option value="pix">Pix</option>
  </select>
  <div id="troco-container" style="display:none;">
    <input id="troco" placeholder="Troco para quanto (opcional)">
  </div>
  <textarea id="observacao" placeholder="Observa√ß√µes do pedido (opcional)" rows="2"></textarea>
  <button class="finalizar" onclick="finalizarPedido()">üì≤ Enviar Pedido</button>
</div>

<script>
// ================= DADOS =================
const pizzas25=[{nome:"Mussarela",preco:24},{nome:"Presunto",preco:24},{nome:"Calabresa",preco:24},{nome:"3 Queijos",preco:24},{nome:"Marguerita",preco:24},{nome:"Alho",preco:24},{nome:"Mineira",preco:24},{nome:"Mista",preco:24},{nome:"Palmito",preco:24},{nome:"Portuguesa",preco:29},{nome:"Lombo Canadense",preco:29},{nome:"Peito de Peru",preco:29},{nome:"Frango C/Catupiry",preco:29},{nome:"Frango C/ Cheddar",preco:29},{nome:"Bacon com Ovos",preco:32},{nome:"Camar√£o C/Catupiry",preco:32},{nome:"Camar√£o C/Alho",preco:32},{nome:"BANANA com CANELA",preco:30},{nome:"PRESTIGIO",preco:30},{nome:"M&M",preco:30},{nome:"PA√áOCA",preco:30},{nome:"ROMEU E JULIETA",preco:30},{nome:"CARIBE",preco:30},{nome:"SENSA√á√ÉO",preco:30},{nome:"BANANA NEVADA",preco:30}];
const pizzas35=pizzas25.map(p=>{let precoNovo=p.preco;if(p.preco===24)precoNovo=39;else if(p.preco===29)precoNovo=43;else if(p.preco===32)precoNovo=58;else if(p.preco===30)precoNovo=45;return{nome:p.nome,preco:precoNovo};});

const tapiocaCategorias={
  "üßÄ Queijos":[{nome:"Mussarela",preco:10},{nome:"Minas",preco:10},{nome:"Cheddar",preco:10},{nome:"Requeij√£o",preco:10},{nome:"Catupiry",preco:10}],
  "ü•© Prote√≠nas":[{nome:"Frango",preco:13},{nome:"Calabresa",preco:10},{nome:"Presunto",preco:10},{nome:"Lombo Canadense",preco:13},{nome:"Peito de Peru",preco:13}],
  "üç¨ Doces":[{nome:"M&M",preco:10},{nome:"Doce de Leite",preco:10},{nome:"Goiabada",preco:10},{nome:"Pa√ßoca",preco:10},{nome:"Nutella",preco:16},{nome:"Chocolate Branco",preco:14},{nome:"Chocolate Preto",preco:14}],
  "üçì Frutas":[{nome:"Coco",preco:10},{nome:"Abacaxi",preco:10},{nome:"Banana",preco:10},{nome:"Morango",preco:14}],
  "ü•ó Acompanhamento":[{nome:"Leite Condensado",preco:0},{nome:"Or√©gano",preco:0},{nome:"Tomate",preco:0},{nome:"Cebola",preco:0},{nome:"Granulado",preco:0}]
};

const bebidas=[{nome:"√Ågua",preco:2.5},{nome:"√Ågua c/ G√°s",preco:3},{nome:"Guaracamp",preco:2.5},{nome:"Refrigerante Lata",preco:6},{nome:"Refrigerante 1L (GUARANA ANTARCTICA)",preco:8},{nome:"Refrigerante 1.5L (GUARANA ANTARCTICA)",preco:10},{nome:"Sukita Laranja",preco:10},{nome:"Sukita Uva",preco:10},{nome:"Sukita Lim√£o",preco:10}];

let carrinho=[],total=0,saboresPizzaSelecionados=[],recheiosTapiocaSelecionados=[],tamanhoSelecionado="";

// ================= FUN√á√ïES =================
function mostrarMenu(id){
  document.querySelectorAll("section").forEach(sec=>sec.classList.remove("ativo"));
  document.getElementById(id).classList.add("ativo");
  if(id==="pizzas") renderPizzas();
  else if(id==="tapiocas") renderTapiocas();
  else if(id==="bebidas") renderBebidas();
}

function renderPizzas(){
  const div=document.getElementById("listaPizzas");
  if(!div) return;
  document.getElementById("t25").classList.toggle("selected",tamanhoSelecionado==="25cm");
  document.getElementById("t35").classList.toggle("selected",tamanhoSelecionado==="35cm");
  if(!tamanhoSelecionado){ div.innerHTML="<p><strong>Escolha o tamanho da Pizza acima</strong></p>"; return; }
  const pizzas=tamanhoSelecionado==='25cm'?pizzas25:pizzas35;
  div.innerHTML="<p><strong>Escolha os sabores (at√© 2)</strong></p>";
  pizzas.forEach((p,i)=>{
    const selected=saboresPizzaSelecionados.includes(p);
    div.innerHTML+=`<div class="produto"><div><strong>${p.nome}</strong> ‚Äî R$ ${p.preco.toFixed(2)}</div><button class="${selected?'selected':''}" onclick="selecionarSaborPizza(${i})">Selecionar</button></div>`;
  });
}

function selecionarTamanho(t){ tamanhoSelecionado=t; saboresPizzaSelecionados=[]; renderPizzas(); }
function selecionarSaborPizza(i){
  const pizzas=tamanhoSelecionado==='25cm'?pizzas25:pizzas35;
  const sabor=pizzas[i];
  const idx=saboresPizzaSelecionados.indexOf(sabor);
  if(idx>=0) saboresPizzaSelecionados.splice(idx,1);
  else{ if(saboresPizzaSelecionados.length>=2){ alert("Voc√™ pode escolher no m√°ximo 2 sabores"); return; } saboresPizzaSelecionados.push(sabor); }
  renderPizzas();
}

function adicionarPizzaAoCarrinho(){
  if(saboresPizzaSelecionados.length===0) return;
  const maiorPreco=Math.max(...saboresPizzaSelecionados.map(s=>s.preco));
  const nomes=saboresPizzaSelecionados.map(s=>s.nome).join(" + ");
  adicionarAoCarrinho(`Pizza ${tamanhoSelecionado} (${nomes})`,maiorPreco);
  saboresPizzaSelecionados=[]; tamanhoSelecionado=""; renderPizzas(); atualizarBotaoAdicionar();
}

function renderTapiocas(){
  const div=document.getElementById("listaTapiocas");
  if(!div) return;
  div.innerHTML="<p><strong>Escolha at√© 2 recheios pagos + 1 Acompanhamento</strong></p>";
  Object.keys(tapiocaCategorias).forEach(c=>{
    div.innerHTML+=`<h3>${c}</h3>`;
    tapiocaCategorias[c].forEach((r,i)=>{
      const id=`${c}-${i}`.replace(/\s/g,"");
      const selected=recheiosTapiocaSelecionados.includes(r);
      div.innerHTML+=`<div class="produto" id="${id}"><span><strong>${r.nome}</strong> ‚Äî R$ ${r.preco.toFixed(2)}</span><button id="btn-${id}" class="${selected?'selected':''}" onclick="selecionarRecheioTapioca('${c}',${i},'${id}')">Selecionar</button></div>`;
    });
  });
}

function selecionarRecheioTapioca(c,i,id){
  const r=tapiocaCategorias[c][i];
  const pagos=recheiosTapiocaSelecionados.filter(x=>x.preco>0);
  const acomp=recheiosTapiocaSelecionados.find(x=>x.preco===0);
  if(r.preco===0 && acomp && !recheiosTapiocaSelecionados.includes(r)){ alert("Voc√™ s√≥ pode escolher 1 Acompanhamento"); return; }
  if(r.preco>0 && !recheiosTapiocaSelecionados.includes(r) && pagos.length>=2){ alert("Voc√™ s√≥ pode escolher at√© 2 recheios pagos"); return; }
  const idx=recheiosTapiocaSelecionados.indexOf(r);
  if(idx>=0) recheiosTapiocaSelecionados.splice(idx,1); else recheiosTapiocaSelecionados.push(r);
  renderTapiocas(); atualizarBotaoAdicionar();
}

function adicionarTapiocaAoCarrinho(){
  if(recheiosTapiocaSelecionados.length===0) return;
  const pagos=recheiosTapiocaSelecionados.filter(r=>r.preco>0);
  const acomp=recheiosTapiocaSelecionados.find(r=>r.preco===0);
  const maiorPreco=pagos.length>0?Math.max(...pagos.map(r=>r.preco)):0;
  let nomes=pagos.map(r=>r.nome); if(acomp) nomes.push(acomp.nome);
  if(nomes.length>0) adicionarAoCarrinho(`Tapioca (${nomes.join(" + ")})`,maiorPreco);
  recheiosTapiocaSelecionados=[]; renderTapiocas(); atualizarBotaoAdicionar();
}

function renderBebidas(){
  const div=document.getElementById("listaBebidas");
  if(!div) return;
  bebidas.forEach((b,i)=>{ div.innerHTML+=`<div class="produto produto-bebida"><strong>${b.nome}</strong> ‚Äî R$ ${b.preco.toFixed(2)}<button onclick="adicionarBebida(${i})">Adicionar</button></div>`; });
}

function adicionarBebida(i){ adicionarAoCarrinho(bebidas[i].nome,bebidas[i].preco); }

function adicionarAoCarrinho(nome,preco){
  const existente=carrinho.find(item=>item.nome===nome);
  if(existente) existente.quantidade++; 
  else carrinho.push({nome,preco,quantidade:1});
  atualizarCarrinho();
}

function removerItem(i){ carrinho.splice(i,1); atualizarCarrinho(); }

function atualizarCarrinho(){
  const div=document.getElementById("itensCarrinho");
  const totalSpan=document.getElementById("totalCarrinho");
  div.innerHTML="";
  total=0;
  carrinho.forEach((item,index)=>{
    total+=item.preco*item.quantidade;
    div.innerHTML+=`<div>${item.nome} x${item.quantidade} ‚Äî R$ ${(item.preco*item.quantidade).toFixed(2)} <button onclick="removerItem(${index})">‚ùå</button></div>`;
  });
  totalSpan.innerText=total.toFixed(2);
}

function atualizarBotaoAdicionar(){
  const botao=document.getElementById("botaoAdicionarCarrinho");
  const pagos=saboresPizzaSelecionados.length>0?saboresPizzaSelecionados.length:recheiosTapiocaSelecionados.filter(r=>r.preco>0).length;
  const acomp=recheiosTapiocaSelecionados.find(r=>r.preco===0)?1:0;
  let texto="üõí Adicionar ao Carrinho";
  if(pagos>0||acomp>0){ texto+=" ("; if(pagos>0) texto+=`${pagos}/2`; if(acomp>0) texto+=`${pagos>0?" + ":""}${acomp} Acompanhamento`; texto+=")"; }
  botao.innerText=texto;
}

// Troco / Pix
function atualizarTrocoPix(){
  const pagamento=document.getElementById("pagamento").value;
  const container=document.getElementById("troco-container");
  const trocoInput=document.getElementById("troco");
  if(pagamento==="dinheiro"){ container.style.display="block"; trocoInput.value=""; }
  else { container.style.display="none"; trocoInput.value=""; }
}

// ================= FINALIZAR PEDIDO =================
function finalizarPedido(){
  const nome=document.getElementById("nome").value.trim();
  const endereco=document.getElementById("endereco").value.trim();
  const pagamento=document.getElementById("pagamento").value;
  const observacao=document.getElementById("observacao").value.trim();
  const troco=document.getElementById("troco").value.trim();
  if(!nome||!endereco||!pagamento||carrinho.length===0){ alert("Preencha todos os dados e adicione itens"); return; }

  let trocoTexto="", pixTexto="";
  if(pagamento==="dinheiro"&&troco) trocoTexto=`\nüíµ Troco para: R$ ${troco}`;
  if(pagamento==="pix") pixTexto="\nüìå Chave Pix: fagpln@gmail.com";

  const enderecoMapa=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(endereco)}`;
  const itensTexto=carrinho.map(i=>`- ${i.nome} x${i.quantidade} (R$ ${(i.preco*i.quantidade).toFixed(2)})`).join("\n");

  let mensagem=`üçï *NOVO PEDIDO - KF PIZZARIA*\nüë§ *Nome:* ${nome}\nüßæ *Pedido:*\n${itensTexto}\nüìç *Endere√ßo:* ${endereco}\nüåê *Mapa:* ${enderecoMapa}\nüí≥ *Pagamento:* ${pagamento}${trocoTexto}${pixTexto}\nüí∞ *Total:* R$ ${total.toFixed(2)}${observacao?`\nüìù *Observa√ß√£o:* ${observacao}`:""}`;

  // Envia para WhatsApp
  // Envia para WhatsApp
const url=`https://wa.me/5521997437285?text=${encodeURIComponent(mensagem)}`;
window.open(url,"_blank");

// üî• SALVAR NO FIREBASE (NOVO)
salvarPedidoFirebase({
  nome,
  endereco,
  pagamento,
  troco: troco || "",
  observacao,
  itens: [...carrinho],
  total
});

// (opcional por enquanto) localStorage pode ficar ou sair depois


  // ================== ARMAZENAR NO LOCALSTORAGE ==================
  const pedidos=JSON.parse(localStorage.getItem("pedidos")||"[]");
  pedidos.push({
    id:Date.now(),
    nome,
    endereco,
    pagamento,
    troco:troco||"",
    observacao,
    itens:[...carrinho],
    total,
    data:new Date().toISOString()
  });
  salvarPedidoFirebase({
  nome,
  endereco,
  pagamento,
  troco,
  observacao,
  itens: [...carrinho],
  total
});


  // Limpar carrinho
  carrinho=[]; atualizarCarrinho(); atualizarBotaoAdicionar();
  alert("Pedido enviado com sucesso!");
}

document.addEventListener("DOMContentLoaded",()=>{ renderPizzas(); renderTapiocas(); renderBebidas(); atualizarCarrinho(); atualizarBotaoAdicionar(); });

<script src="firebase-pedidos.js"></script>

</body>
</html>

